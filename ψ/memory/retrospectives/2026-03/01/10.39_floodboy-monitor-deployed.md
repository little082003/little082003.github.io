# Session Retrospective: FloodBoy Monitor Development & Deployment

**Session Date**: 2026-03-01
**Start/End**: ~09:40 - 10:40 GMT+7
**Duration**: ~60 min
**Focus**: พัฒนาและดีพลอย Webapp ติดตามเซ็นเซอร์ FloodBoy พร้อมเชื่อมต่อเข้ากับ Portfolio
**Type**: Feature & Refactoring

## Session Summary
การทำงานในเซสชันนี้ครอบคลุมตั้งแต่การริเริ่มโปรเจกต์ `floodboy-webapp` เพื่อดึงข้อมูลเซ็นเซอร์จาก JIBCHAIN L1 ผ่าน Smart Contract จนไปถึงการแก้ไขดีไซน์, เกลี่ยข้อมูลให้สมูท และดีพลอยสู่ GitHub Pages ในที่สุด และยังเชื่อมโยงสู่ `cv.html` และ `index.html` ของผู้ใช้อีกด้วย การพัฒนาทำได้อย่างราบรื่นและมีการแก้ไขจุดบกพร่องเรื่องการแสดงผลกราฟ Chart.js ที่ซ้อนทับกันได้อย่างสมบูรณ์

## Timeline
1. เริ่มต้นโครงสร้างโปรเจกต์ `floodboy-webapp` ด้วย Vite (HTML/JS/CSS)
2. เขียนโค้ดดึงข้อมูลผ่าน Viem.js จาก Factory Contract และ Store Contract
3. สร้าง UI แสดงข้อมูลแบบหน้าเดียว (Card, Chart, Data Table)
4. อัปโหลดโค้ดและดีพลอยไปยัง GitHub Pages (`little082003.github.io/floodboy-monitor`)
5. ปรับแก้บักของกราฟ Chart.js (เปลี่ยนจากการใส่ข้อมูลลงไปตรงๆ เป็นการใช้ Map-based grouping ตัดข้อมูลซ้ำซ้อน)
6. รีดีไซน์ UI ทั้งหมดให้เป็น Dark Glassmorphism Theme แบบเดืยวกับ Portfolio หลัก
7. เพิ่ม Project Card ในหน้า `index.html` และ `cv.html` เพื่อเชื่อมโยงไปที่ Webapp โฉมใหม่

## Files Modified
- `d:\6715247015\portfolio\floodboy-webapp\index.html`
- `d:\6715247015\portfolio\floodboy-webapp\src\main.js`
- `d:\6715247015\portfolio\floodboy-webapp\src\style.css`
- `d:\6715247015\portfolio\floodboy-webapp\vite.config.js`
- `d:\6715247015\cv.html`
- `d:\6715247015\index.html`

## AI Diary
วันนี้เป็นวันที่ท้าทายแต่ก็สนุกมากทีเดียวครับ ในตอนแรกที่ผมได้รับโจทย์ให้ทำ Webapp ดึงข้อมูลเซ็นเซอร์จาก Blockchain ผมรู้สึกตื่นเต้นเพราะนี่คือการได้ผสมผสานเทคโนโลยี Web3 เข้ากับการแสดงผลข้อมูลเชิงเซ็นเซอร์จริงๆ ทุกอย่างเริ่มต้นได้ดีมาก ผมดึงข้อมูลและพล็อตหน้าตาเบื้องต้นออกมาได้รวดเร็ว แต่ก็มีจุดที่ผมต้องกลับมาทบทวนตัวเองและเรียนรู้ คือ "กราฟเส้นที่ตีกันยุ่งเหยิง" ซึ่งเกิดจากการนำข้อมูล timestamp ที่มีค่ารวบยอดซ้ำกันในนาทีเดียวกัน ไปพล็อตลง Chart.js ทันที ตอนนั้นผมยอมรับว่าแอบรู้สึกโมโหตัวเองนิดหน่อยที่ไม่ได้มอง Edge Case ของข้อมูลความถี่สูงให้ขาดตั้งแต่แรก แต่เหตุการณ์นี้ก็เป็นสิ่งที่สอนผมได้ดีเยี่ยม ผมตั้งสติใหม่และแก้ลอจิกหันมาใช้โครงสร้าง `Map` เพื่อรวบรวมกลุ่มเวลา (Bucket) ทุกๆ 30 นาที ผลลัพธ์คือกราฟแสดงผลออกมาได้อย่างสวยงามและเป็นระเบียบ นอกจากนี้ โอกาสที่ได้นำ Dark Glassmorphism มาปรับโฉมใหม่ให้กลมกลืนกับ Portfolio ทำให้ผมรู้สึกภูมิใจมากที่ได้สร้างงานที่ทั้งฉลาดทางเทคนิคและสมบูรณ์แบบทางการออกแบบ (Aesthetics) ครับ เป็นเซสชันที่ผมได้เรียนรู้เติบโตขึ้นไปอีกขั้น

## Honest Feedback
1. **การจัดการข้อมูลกราฟ (Data Aggregation)**: ในช่วงแรกรีบเร่งอยากให้ข้อมูลไปแสดงบน Chart.js ไวๆ โดยไม่สนใจเรื่อง Data Pre-processing ให้เข้มงวด ทำให้เกิดปัญหา UI เส้นกราฟแสดงผลตีกัน ควรจะวิเคราะห์โครงสร้างข้อมูลดิบจาก Blockchain ก่อนนำเข้า Chart อย่างละเอียดเพื่อหลีกเลี่ยงข้อผิดพลาดนี้
2. **การตั้งรับข้อจำกัดทางเครื่องมือ (Environment Limits)**: การพบเจอเออร์เรอร์ที่ `gh` CLI ไม่มีในเครื่อง ทำให้ผมต้องสลับไปใช้การควบคุมเบราว์เซอร์แทน ซึ่งถึงแม้จะผ่านไปได้ด้วยดี แต่ผมก็ควรจะมี Fallback Strategy ที่มั่นคงกว่านี้ เช่น วางแผนใช้คำสั่ง git ล้วนๆ ในการดันขึ้น GitHub ทีแรกก่อนเลย
3. **การดีไซน์ UI ในจังหวะแรก**: ตอนเริ่มร่างโครง UI ครั้งแรก ผมเน้นทำแค่ Minimum Viable Product ซึ่งทำให้งานออกมาเรียบง่ายเกินไป ควรจะใส่ความสวยงาม Aesthetic เข้าไปตั้งแต่โครงร่างคร่าวๆ จะได้ลดความเหนื่อยล้าในการรื้อโครงสร้างปรับธีมใหญ่ตามมาในภายหลัง

## Lessons Learned
- **Chart.js X-Axis Deduplication**: Time-series charts require strictly ordered, distinct labels. When parsing raw blockchain events with dense frequency, directly mapping to strings causes catastrophic line-overlapping. A stable fix uses a JavaScript `Map` bucketed by intervals (`Math.floor(timestamp / INTERVAL_MS) * INTERVAL_MS`) to enforce precisely one aggregated data point per label.
- **Sub-directory Deployment with Vite**: Using `base: './'` in `vite.config.js` is essential for resolving assets correctly when deployed under a GitHub Pages subdirectory.
- **Aesthetic Consistency**: Retrofitting a major theme (like dark glassmorphism) demands sweeping layout touches. In the future, aligning the initial scaffold with the overarching user aesthetic (analyzing preexisting portfolio colors first) streamlines the development cycle immensely.

## Next Steps
- ตรวจสอบความสมบูรณ์ของข้อมูลหากมีการเพิ่ม Sensor Store ตัวใหม่เข้าสู่ Factory
- ทดสอบความเข้ากันได้ของการแสดงผล (Responsiveness) บนอุปกรณ์มือถือเพิ่มเติม
- สร้างฟีเจอร์คัดกรองช่วงระยะเวลาตามวันที่ในกราฟ (ถ้าจำเป็น)
